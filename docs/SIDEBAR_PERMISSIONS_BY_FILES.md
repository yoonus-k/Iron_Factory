# ğŸ“‹ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª

## 1ï¸âƒ£ Ù…Ù„ÙØ§Øª Ø§Ù„Ù€ Roles

### `resources/views/roles/index.blade.php`
**ÙˆØµÙ**: ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
@if(canCreate('MANAGE_ROLES'))       // Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ± Ø¬Ø¯ÙŠØ¯
@if(canUpdate('MANAGE_ROLES'))       // ØªØ¹Ø¯ÙŠÙ„ Ø¯ÙˆØ±
@if(canDelete('MANAGE_ROLES') && !$role->is_system)  // Ø­Ø°Ù Ø¯ÙˆØ± (Ù…Ø§ Ø¹Ø¯Ø§ Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…)
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** (MANAGE_ROLES)
- âŒ **Manager** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)
- âŒ **Supervisor** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)
- âŒ **Worker** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ù€ Sidebar**:
```blade
@isAdmin
    <li>
        <a href="{{ route('roles.index') }}">
            <i class="fas fa-user-shield"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
        </a>
    </li>
@endif
```

---

### `resources/views/roles/create.blade.php`
**ÙˆØµÙ**: Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ± Ø¬Ø¯ÙŠØ¯

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
// ÙŠÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¯ ØªØ­Ù‚Ù‚ Ù…Ù† canCreate('MANAGE_ROLES') Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
// Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø¶Ø§ÙÙŠØ§Ù‹
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** ÙÙ‚Ø·

---

### `resources/views/roles/edit.blade.php`
**ÙˆØµÙ**: ØªØ¹Ø¯ÙŠÙ„ Ø¯ÙˆØ±

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
// ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆØ±
@canUpdate('MANAGE_ROLES')
    <button type="submit">Ø­ÙØ¸</button>
@endcanUpdate

// Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù„Ø¯ÙˆØ±
// ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø«Ù„:
@if(canCreate('MANAGE_ROLES'))
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** ÙÙ‚Ø·

---

## 2ï¸âƒ£ Ù…Ù„ÙØ§Øª Ø§Ù„Ù€ Permissions

### `resources/views/permissions/index.blade.php`
**ÙˆØµÙ**: ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
@if(canCreate('MANAGE_PERMISSIONS'))      // Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
@if(canUpdate('MANAGE_PERMISSIONS'))      // ØªØ¹Ø¯ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ©
@if(canDelete('MANAGE_PERMISSIONS') && !$permission->is_system)  // Ø­Ø°Ù ØµÙ„Ø§Ø­ÙŠØ©
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** (MANAGE_PERMISSIONS)
- âŒ **Manager** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)
- âŒ **Supervisor** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)
- âŒ **Worker** (Ù„Ø§ ÙŠÙˆØ¬Ø¯)

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ù€ Sidebar**:
```blade
@isAdmin
    <li>
        <a href="{{ route('permissions.index') }}">
            <i class="fas fa-key"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        </a>
    </li>
@endif
```

---

### `resources/views/permissions/create.blade.php`
**ÙˆØµÙ**: Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
// ÙŠÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¯ ØªØ­Ù‚Ù‚ Ù…Ù† canCreate('MANAGE_PERMISSIONS') Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** ÙÙ‚Ø·

---

### `resources/views/permissions/edit.blade.php`
**ÙˆØµÙ**: ØªØ¹Ø¯ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ©

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:
```blade
@canUpdate('MANAGE_PERMISSIONS')
    <button type="submit">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
@endcanUpdate
```

**Ù…Ù† ÙŠØ´ÙˆÙ Ø§Ù„ØµÙØ­Ø©**:
- âœ… **Admin** ÙÙ‚Ø·

---

## 3ï¸âƒ£ Ù…Ù„Ù Ø§Ù„Ù€ Sidebar

### `resources/views/layout/sidebar.blade.php`
**ÙˆØµÙ**: Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (ÙŠØ¸Ù‡Ø± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)

**Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©**:

#### Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
```blade
@canView('VIEW_MAIN_DASHBOARD')
    <li>
        <a href="/dashboard">{{ __('app.menu.dashboard') }}</a>
    </li>
@endcanView
```
- âœ… Admin, Manager, Supervisor, Worker

#### Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
```blade
@canView('MANAGE_WAREHOUSES')
    <li class="has-submenu">
        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    </li>
@endcanView
```
- âœ… Admin, Manager
- âŒ Supervisor, Worker

#### Ø§Ù„Ù…Ø±Ø§Ø­Ù„ (1-4)
```blade
@canView('STAGE1_STANDS')  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
@canView('STAGE2_PROCESSING')  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
@canView('STAGE3_COILS')  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©
@canView('STAGE4_PACKAGING')  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
```
- âœ… Admin, Manager, Supervisor, Worker

#### ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
```blade
@canView('MANAGE_MOVEMENTS')
    <li class="has-submenu">
        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    </li>
@endcanView
```
- âœ… Admin, Manager, Supervisor
- âŒ Worker

#### Ø§Ù„Ù‡Ø¯Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©
```blade
@canView('VIEW_COSTS')
    <li class="has-submenu">
        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    </li>
@endcanView
```
- âœ… Admin, Manager, Supervisor
- âŒ Worker

#### Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
```blade
@canView('VIEW_REPORTS')
    <li class="has-submenu">
        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    </li>
@endcanView
```
- âœ… Admin, Manager, Supervisor
- âŒ Worker

#### Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
```blade
@canView('MANAGE_USERS')
    <li class="has-submenu">
        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
        @if(isAdmin())
            <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª - Admin ÙÙ‚Ø· -->
        @endif
    </li>
@endcanView
```
- âœ… Admin, Manager
- âŒ Supervisor, Worker

#### Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
```blade
@if(isAdmin())
    <li class="has-submenu">
        <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    </li>
@endif
```
- âœ… Admin ÙÙ‚Ø·
- âŒ Manager, Supervisor, Worker

---

## ğŸ“Š Ù…ØµÙÙˆÙØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù€ Sidebar                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©           â”‚ Ø§Ù„ÙƒÙˆØ¯                  â”‚ A â”‚ M â”‚ S â”‚ W â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…         â”‚ VIEW_MAIN_DASHBOARD    â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚
â”‚ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹           â”‚ MANAGE_WAREHOUSES      â”‚ âœ…â”‚ âœ…â”‚ âŒâ”‚ âŒâ”‚
â”‚ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰      â”‚ STAGE1_STANDS          â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚
â”‚ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©     â”‚ STAGE2_PROCESSING      â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚
â”‚ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©     â”‚ STAGE3_COILS           â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚
â”‚ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©     â”‚ STAGE4_PACKAGING       â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚
â”‚ ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬       â”‚ MANAGE_MOVEMENTS       â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âŒâ”‚
â”‚ Ø§Ù„Ù‡Ø¯Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©      â”‚ VIEW_COSTS             â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âŒâ”‚
â”‚ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±            â”‚ VIEW_REPORTS           â”‚ âœ…â”‚ âœ…â”‚ âœ…â”‚ âŒâ”‚
â”‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†   â”‚ MANAGE_USERS           â”‚ âœ…â”‚ âœ…â”‚ âŒâ”‚ âŒâ”‚
â”‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø±       â”‚ MANAGE_ROLES           â”‚ âœ…â”‚ âŒâ”‚ âŒâ”‚ âŒâ”‚
â”‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª    â”‚ MANAGE_PERMISSIONS     â”‚ âœ…â”‚ âŒâ”‚ âŒâ”‚ âŒâ”‚
â”‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª           â”‚ (isAdmin ÙÙ‚Ø·)         â”‚ âœ…â”‚ âŒâ”‚ âŒâ”‚ âŒâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ø§Ù„Ù…ÙØªØ§Ø­: A=Admin, M=Manager, S=Supervisor, W=Worker               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©

### 1. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù€ Routes
```php
// ÙÙŠ routes/web.php Ø£Ùˆ routes/admin.php
Route::middleware(['auth', 'check.permission:MANAGE_ROLES'])->group(function () {
    Route::resource('roles', RoleController::class);
});

Route::middleware(['auth', 'check.permission:MANAGE_PERMISSIONS'])->group(function () {
    Route::resource('permissions', PermissionController::class);
});
```

### 2. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù€ Controllers
```php
public function index()
{
    if (!canRead('MANAGE_ROLES')) {
        abort(403, 'Unauthorized');
    }
    // ... Ø§Ù„ÙƒÙˆØ¯
}
```

### 3. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù€ API
```php
// ÙÙŠ API routes
Route::middleware(['auth:sanctum', 'check.permission:MANAGE_ROLES'])
    ->get('/api/roles', [RoleController::class, 'index']);
```

---

## âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø©

- [ ] Ø¹Ø±Ù‘Ù Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
- [ ] Ø£Ø¶ÙÙ‡Ø§ ÙÙŠ Ø§Ù„Ø³ÙŠØ¯Ø± `FixSidebarPermissionsSeeder.php`
- [ ] Ø§Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Ø§Ø³ØªØ®Ø¯Ù… `@canView`, `@canCreate`, etc. ÙÙŠ Ø§Ù„Ù€ Blade
- [ ] Ø§Ø­Ù…Ù Ø§Ù„Ù€ Routes Ø¨Ù€ Middleware
- [ ] Ø§Ø­Ù…Ù Ø§Ù„Ù€ Controllers Ø¨Ù€ canRead, canCreate, etc.
- [ ] Ø§Ø®ØªØ¨Ø± Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
- [ ] ÙˆØ«Ù‘Ù‚ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù‡Ù†Ø§

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: 2025-11-24
**Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… ØªÙˆØ«ÙŠÙ‚ ÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
