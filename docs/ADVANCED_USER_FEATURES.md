# ๐ ููุฒุงุช ูุชูุฏูุฉ ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุชุงู ูุชูุฏูุชุงู ููุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:

1. **ุฅุนุงุฏุฉ ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู** - ุฅุฑุณุงู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ููุจุฑูุฏ
2. **ุชุณุฌูู ุฏุฎูู ุงููููุน (Impersonation)** - ุชุณุฌูู ุงูุฏุฎูู ูููุธู ุขุฎุฑ

---

## โ๏ธ ููุฒุฉ 1: ุฅุนุงุฏุฉ ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู

### ุงููุตู
ุนูุฏูุง ุชูุณู ููุธู ูููุฉ ุงููุฑูุฑ ุฃู ุชุฑูุฏ ุฅุนุงุฏุฉ ุชุนููููุงุ ููููู ูู ุตูุญุฉ ุงูุนุฑุถ ุฅุฑุณุงู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ูุจุงุดุฑุฉ ููุจุฑูุฏ ุงูุฅููุชุฑููู.

### ููููุฉ ุงูุงุณุชุฎุฏุงู

1. **ุงุฐูุจ ุฅูู ุตูุญุฉ ุชูุงุตูู ุงููุณุชุฎุฏู**
   ```
   /users/{id}
   ```

2. **ุงุถุบุท ุนูู ุฒุฑ "ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู"**
   - ูุธูุฑ ุงูุฒุฑ ูู ูุณู ุงูุฅุฌุฑุงุกุงุช
   - ููู ุฃุฎุถุฑ ุจุฃููููุฉ ุจุฑูุฏ

3. **ุชุฃููุฏ ุงูุฅุฑุณุงู**
   - ุณูุธูุฑ ุชุฃููุฏ: "ูู ุชุฑูุฏ ุฅุฑุณุงู ุจูุงูุงุช ุฏุฎูู ุฌุฏูุฏุฉ ููุจุฑูุฏ ุงูุฅููุชุฑูููุ"
   - ุงุถุบุท OK ููุชุฃููุฏ

4. **ุณูุชู:**
   - ุชูููุฏ ูููุฉ ูุฑูุฑ ุนุดูุงุฆูุฉ ุฌุฏูุฏุฉ (12 ุญุฑู)
   - ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุฅุฑุณุงู ุจุฑูุฏ ุจุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ
   - ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู ุงูุฌุฏูุฏุฉ ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจูุฌุงุญ"

### ุงูุฒุฑ

```html
<form method="POST" action="{{ route('users.resend-credentials', $user) }}">
    @csrf
    <button type="submit" class="btn btn-mail">
        <i class="feather icon-mail"></i>
        ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู
    </button>
</form>
```

### ุงูู Route

```php
Route::post('users/{user}/resend-credentials', [UserController::class, 'resendCredentials'])
    ->name('users.resend-credentials');
```

### ุงูู Function

```php
public function resendCredentials(User $user)
{
    // ุชูููุฏ ูููุฉ ูุฑูุฑ ุนุดูุงุฆูุฉ ุฌุฏูุฏุฉ
    $newPassword = Str::random(12);
    
    // ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ
    $user->update(['password' => Hash::make($newPassword)]);
    
    // ุฅุฑุณุงู ุงูุจุฑูุฏ
    Mail::send(new UserCredentialsMail($user, $newPassword));
    
    return back()->with('success', 'ุชู ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู...');
}
```

---

## ๐ต๏ธ ููุฒุฉ 2: ุชุณุฌูู ุงูุฏุฎูู ุงููููุน (Impersonation)

### ุงููุตู
ุชุชูุญ ูุฐู ุงูููุฒุฉ ูููุณุคูู ุชุณุฌูู ุงูุฏุฎูู ูููุธู ุขุฎุฑ ูุงุฎุชุจุงุฑ ุงูุฃูุธูุฉ ุฃู ุญู ุงููุดุงูู ุฏูู ุงูุญุงุฌุฉ ููููุฉ ูุฑูุฑ ุงูููุธู.

### ููููุฉ ุงูุงุณุชุฎุฏุงู

#### ุชุณุฌูู ุงูุฏุฎูู ูููุธู:

1. **ุงุฐูุจ ุฅูู ุตูุญุฉ ุชูุงุตูู ุงููุณุชุฎุฏู**
   ```
   /users/{id}
   ```

2. **ุงุถุบุท ุนูู ุฒุฑ "ุฏุฎูู ูููุธู"**
   - ูุธูุฑ ุงูุฒุฑ ูู ูุณู ุงูุฅุฌุฑุงุกุงุช
   - ููู ุจููุณุฌู ุจุฃููููุฉ ุฏุฎูู
   - ูุธูุฑ ููุท ุฅุฐุง ูุงู ุงูุญุณุงุจ ูุดุท

3. **ุชุณุฌูู ุงูุฏุฎูู ุชููุงุฆู**
   - ุณูุชู ุชุณุฌูู ุฏุฎูู ุญุณุงุจู ุจุญุณุงุจ ุงูููุธู
   - ุณูุชู ุญูุธ ูุนุฑูู ุงูุฃุตูู ูู ุงูุฌูุณุฉ
   - ุณูุชู ุชูุฌููู ููู Dashboard

4. **ุชูุจูู ูู ุงูุฃุนูู**
   - ุณูุธูุฑ ุชูุจูู ุฃุตูุฑ ูููู: "ุฃูุช ุชุณุฌู ุงูุฏุฎูู ูููุธู ุขุฎุฑ"
   - ูุนุฑุถ ุงุณู ุงูููุธู
   - ููุฌุฏ ุฒุฑ "ุงูุนูุฏุฉ ุฅูู ุญุณุงุจู"

#### ุงูุนูุฏุฉ ุฅูู ุญุณุงุจู:

**ุงูุทุฑููุฉ 1: ูู ุงูุชูุจูู**
- ุงุถุบุท ุนูู ุฒุฑ "ุงูุนูุฏุฉ ุฅูู ุญุณุงุจู" ูู ุงูุชูุจูู ุงูุฃุตูุฑ

**ุงูุทุฑููุฉ 2: ูู ุฑุงุจุท ูุจุงุดุฑ**
```
POST /exit-impersonation
```

### ุงูุฃุฒุฑุงุฑ

#### ุฒุฑ ุงูุฏุฎูู ูููุธู:
```html
<form method="POST" action="{{ route('users.impersonate', $user) }}">
    @csrf
    <button type="submit" class="btn btn-impersonate">
        <i class="feather icon-log-in"></i>
        ุฏุฎูู ูููุธู
    </button>
</form>
```

#### ุฒุฑ ุงูุนูุฏุฉ (ูู ุงูุชูุจูู):
```html
<form method="POST" action="{{ route('exit-impersonation') }}">
    @csrf
    <button type="submit">ุงูุนูุฏุฉ ุฅูู ุญุณุงุจู</button>
</form>
```

### ุงูู Routes

```php
Route::post('users/{user}/impersonate', [UserController::class, 'impersonate'])
    ->name('users.impersonate');
Route::post('exit-impersonation', [UserController::class, 'exitImpersonation'])
    ->name('exit-impersonation');
```

### ุงูู Functions

```php
public function impersonate(User $user)
{
    // ุงูุชุญูู ูู ุฃูู Admin
    if (!$currentUser->isAdmin()) {
        return back()->with('error', 'ูุง ุชูุฌุฏ ูุฏูู ุตูุงุญูุงุช ูุงููุฉ');
    }

    // ุญูุธ ูุนุฑูู ุงูุฃุตูู
    session(['impersonated_by' => $currentUser->id]);
    
    // ุชุณุฌูู ุฏุฎูู ุญุณุงุจ ุงูููุธู
    auth()->guard('web')->login($user);
    
    return redirect('/dashboard');
}

public function exitImpersonation()
{
    $originalUserId = session('impersonated_by');
    $originalUser = User::find($originalUserId);
    
    // ุญุฐู ูู ุงูุฌูุณุฉ
    session()->forget('impersonated_by');
    
    // ุงูุนูุฏุฉ ูุญุณุงุจู ุงูุฃุตูู
    auth()->guard('web')->login($originalUser);
    
    return redirect('/dashboard');
}
```

---

## ๐จ ุงูุชุตููู ูุงูุฃููุงู

### ุงูุฃุฒุฑุงุฑ:

| ุงูุฒุฑ | ุงูููู | ุงููุตู |
|-----|------|--------|
| ุชุนุฏูู | ๐ต ุฃุฒุฑู | ูุชุนุฏูู ุงูุจูุงูุงุช |
| ุฏุฎูู ูููุธู | ๐ฃ ุจููุณุฌู | ูุชุณุฌูู ุงูุฏุฎูู ุงููููุน |
| ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู | ๐ข ุฃุฎุถุฑ | ูุฅุฑุณุงู ุงูุจุฑูุฏ |
| ุงูุนูุฏุฉ | ๐ ุฑูุงุฏู | ููุนูุฏุฉ ูููุงุฆูุฉ |

### ุงูุชูุจูู:

- **ููู ุงูุฎูููุฉ**: ุฃุตูุฑ (#fff3cd)
- **ููู ุงูุญุฏ**: ุจุฑุชูุงูู (#ffc107)
- **ููู ุงููุต**: ุจูู (#856404)
- **ุงูุฃููููุฉ**: ๐ต๏ธ ูุณุชุฎุฏู ุณุฑู

---

## โ๏ธ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

### ูุฅุนุงุฏุฉ ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู:
```
MANAGE_USERS:update
```

### ูุชุณุฌูู ุงูุฏุฎูู ุงููููุน:
```
Admin ููุท (isAdmin())
```

---

## ๐ง ูุญุชูู ุงูุจุฑูุฏ ุงููุฑุณู

ุงูุจุฑูุฏ ูุญุชูู ุนูู:
- โ ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ (ุนุดูุงุฆูุฉ)
- โ ุงุณู ุงููุณุชุฎุฏู
- โ ุชุนูููุงุช ุงูุฏุฎูู
- โ ุชูุจููุงุช ุฃูููุฉ

---

## ๐ ุงูุฃูุงู

### ุญูุงูุฉ ูููุฉ:
1. **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช** - ููุท Admin ููุฏุฎูู ุงููููุน
2. **ุงูุชุญูู ูู ุญุงูุฉ ุงูุญุณุงุจ** - ูุง ูููู ุงูุฏุฎูู ุจุญุณุงุจ ูุนุทู
3. **ุญูุธ ุงููุณุงุฑ** - ูุญูุธ ูุนุฑู ุงููุณุชุฎุฏู ุงูุฃุตูู
4. **ุชุดููุฑ** - ูููุงุช ูุฑูุฑ ุนุดูุงุฆูุฉ ูุขููุฉ
5. **ุชูุจูู ูุงุถุญ** - ูุนุฑู ุฃูู ูู ูุถุน ูููุน

---

## ๐ ูุซุงู ุนููู

### ุณููุงุฑูู: ููุธู ูุณู ูููุฉ ุงููุฑูุฑ

```
1. ุงุฐูุจ ุฅูู /users
2. ุงุจุญุซ ุนู ุงูููุธู "ุฃุญูุฏ ูุญูุฏ"
3. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนุฑุถ (๐๏ธ)
4. ุชุฌุฏ ุตูุญุฉ ุงูุชูุงุตูู
5. ุงุถุบุท ุนูู ุฒุฑ "ุฅุฑุณุงู ุจูุงูุงุช ุงูุฏุฎูู" (ุฃุฎุถุฑ)
6. ุชุฃููุฏ ุงูุฅุฑุณุงู
7. โ ุชู ุฅุฑุณุงู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ูุจุฑูุฏู ุงูุฅููุชุฑููู
8. ุงูููุธู ูุณุชูุจู ุงูุจุฑูุฏ ููุณุฌู ุงูุฏุฎูู
```

### ุณููุงุฑูู: ุงุฎุชุจุงุฑ ุญุณุงุจ ููุธู

```
1. ุงุฐูุจ ุฅูู /users
2. ุงุจุญุซ ุนู ุงูููุธู ุงูุฐู ุชุฑูุฏ ุงุฎุชุจุงุฑู
3. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนุฑุถ (๐๏ธ)
4. ุงุถุบุท ุนูู ุฒุฑ "ุฏุฎูู ูููุธู" (ุจููุณุฌู)
5. โ ุชู ุชุณุฌูู ุงูุฏุฎูู ูููุธู
6. โ๏ธ ุธูุฑ ุชูุจูู ุฃุตูุฑ ูููู ุฃูู ูู ูุถุน ูููุน
7. ุงุฎุชุจุฑ ุงูุฃูุธูุฉ ูููุธู
8. ุงุถุบุท ุนูู "ุงูุนูุฏุฉ ุฅูู ุญุณุงุจู" ูู ุงูุชูุจูู
9. โ ุนุฏุช ูุญุณุงุจู ุงูุฃุตูู
```

---

## ๐ ุงูููุงุฆุฏ

| ุงููุงุฆุฏุฉ | ุงููุตู |
|--------|--------|
| ๐ **ุฃูุงู ุนุงูู** | ุตูุงุญูุงุช ูุญุฏุฏุฉ ุฌุฏุงู |
| โก **ุณุฑุนุฉ** | ูุง ุญุงุฌุฉ ููุดุงุฑูุฉ ูููุงุช ูุฑูุฑ |
| ๐ง **ุณูููุฉ** | ุชู ุชููุงุฆูุงู ุนุจุฑ ุงูุจุฑูุฏ |
| ๐งช **ุงุฎุชุจุงุฑ** | ุงุฎุชุจุฑ ุงูุฃูุธูุฉ ุจุณูููุฉ |
| ๐ **ุชุชุจุน** | ูุนุฑูุฉ ูู ูุงู ูุณุชุฎุฏู ุงูุญุณุงุจ |
| ๐ฏ **ุฏูุฉ** | ุชูุจููุงุช ูุงุถุญุฉ ุฌุฏุงู |

---

## โ๏ธ ุงููููุงุช ุงููุนุฏูุฉ

### Controllers:
```
app/Http/Controllers/UserController.php
- resendCredentials()
- impersonate()
- exitImpersonation()
```

### Views:
```
resources/views/users/show.blade.php
- ุฅุถุงูุฉ ุงูุฃุฒุฑุงุฑ ุงูุฌุฏูุฏุฉ
- ุฅุถุงูุฉ CSS ููุฃุฒุฑุงุฑ

resources/views/layout/topbar.blade.php
- ุฅุถุงูุฉ ุชูุจูู Impersonation
```

### Routes:
```
routes/web.php
- POST /users/{user}/resend-credentials
- POST /users/{user}/impersonate
- POST /exit-impersonation
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฏุฎูู ุงููููุน** ูุง ูุบูุฑ ูููุฉ ุงููุฑูุฑ ุงูุฃุตููุฉ
2. **ุงูุจุฑูุฏ ุงูุฌุฏูุฏ** ููููุฏ ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ูุชุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุงูุชูุจูู** ูุธูุฑ ูู ูู ุตูุญุฉ ุนูุฏ ุงูุฏุฎูู ุงููููุน
4. **ุงูุตูุงุญูุงุช** ูุญุฏุฏุฉ ุฌุฏุงู ููุฃูุงู ุงููุตูู
5. **ุงูุฌูุณุฉ** ุชุญุชูุธ ุจูุนุฑู ุงูุญุณุงุจ ุงูุฃุตูู

---

**ูุณุฎุฉ ุงูููุฒุงุช**: 2.0
**ุชุงุฑูุฎ ุงูุฅุถุงูุฉ**: 24 ููููุจุฑ 2025
**ุงูุญุงูุฉ**: โ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
