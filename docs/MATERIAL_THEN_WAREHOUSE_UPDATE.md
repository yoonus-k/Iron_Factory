# ๐ฆ ุชุญุฏูุซ: ุงุฎุชูุงุฑ ุงููุงุฏุฉ ุซู ุงููุณุชูุฏุน ููุฅุฐู ุงูุตุงุฏุฑ

## โ ุงูุชุบููุฑ ุงูุฌุฏูุฏ

**ูุจู:** ูุงู ุงููุธุงู ูุทูุจ ุงุฎุชูุงุฑ `material_detail` (ุงููุงุฏุฉ ูู ูุณุชูุฏุน ูุนูู) ูุจุงุดุฑุฉ

**ุงูุขู:** ุงููุธุงู ูุทูุจ:
1. ุงุฎุชูุงุฑ **ุงููุงุฏุฉ** ุฃููุงู
2. ุซู ุงุฎุชูุงุฑ **ุงููุณุชูุฏุน ุงููุตุฏุฑ** (ุงูุฐู ูุญุชูู ุนูู ูุฐู ุงููุงุฏุฉ)
3. ูุนุฑุถ ุงููููุฉ ุงููุชููุฑุฉ ูู ูู ูุณุชูุฏุน

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุขู

### ุงูุฎุทูุงุช:

#### 1๏ธโฃ ุงุฎุชูุงุฑ ุงููุงุฏุฉ
```
๐ฆ ุงููุงุฏุฉ ุงููุฑุงุฏ ุฅุฎุฑุงุฌูุง: [ุญุฏูุฏ]
   โ ุฅุฌูุงูู ูุชููุฑ: 1500 ุทู ูู 3 ูุณุชูุฏุนุงุช
```

#### 2๏ธโฃ ุงุฎุชูุงุฑ ุงููุณุชูุฏุน ุงููุตุฏุฑ
```
๐ญ ุงููุณุชูุฏุน ุงููุตุฏุฑ: 
   - ุงููุณุชูุฏุน ุงูุฑุฆูุณู [M01] - ูุชููุฑ: 800 ุทู
   - ุงููุณุชูุฏุน ุงููุฑุนู [M02] - ูุชููุฑ: 500 ุทู  
   - ูุณุชูุฏุน ุงูุชุตููุน [M03] - ูุชููุฑ: 200 ุทู
```

#### 3๏ธโฃ ุฅุฏุฎุงู ุงููููุฉ
```
๐ ุงููููุฉ ุงููุฑุงุฏ ุฅุฎุฑุงุฌูุง: [300] ุทู
   โ ุณูุชู ุฎุตู 300 ุทู ูู ุงููุณุชูุฏุน ุงูุฑุฆูุณู
```

#### 4๏ธโฃ ุงุฎุชูุงุฑ ุงููุฌูุฉ
```
๐ฏ ุงููุฌูุฉ: [ูุณู ุงูุฅูุชุงุฌ]
๐ ุณุจุจ ุงูุฅุฎุฑุงุฌ: ููุฅูุชุงุฌ - ุทูุจูุฉ ุฑูู 123
```

---

## ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ

### 1. View (create.blade.php)

#### ุงูุญููู ุงูุฌุฏูุฏุฉ:
```blade
<!-- ุงุฎุชูุงุฑ ุงููุงุฏุฉ -->
<select name="material_id" id="material_id_outgoing">
    <option>ุญุฏูุฏ (ุฅุฌูุงูู: 1500 ุทู ูู 3 ูุณุชูุฏุนุงุช)</option>
</select>

<!-- ุงุฎุชูุงุฑ ุงููุณุชูุฏุน ุงููุตุฏุฑ (ูุธูุฑ ุจุนุฏ ุงุฎุชูุงุฑ ุงููุงุฏุฉ) -->
<select name="warehouse_from_id" id="warehouse_from_id">
    <option>ุงููุณุชูุฏุน ุงูุฑุฆูุณู - ูุชููุฑ: 800 ุทู</option>
</select>

<!-- ุญูู ูุฎูู ูุญูุธ material_detail_id -->
<input type="hidden" name="material_detail_id" id="material_detail_id_hidden">
```

#### JavaScript:
```javascript
// ุจูุงูุงุช ุงููุณุชูุฏุนุงุช ูุฌูุนุฉ ุญุณุจ ุงููุงุฏุฉ
const warehouseData = {
    '1': [ // material_id
        {warehouse_id: 1, quantity: 800, warehouse_name: 'ุงููุณุชูุฏุน ุงูุฑุฆูุณู'},
        {warehouse_id: 2, quantity: 500, warehouse_name: 'ุงููุณุชูุฏุน ุงููุฑุนู'}
    ]
};

// ุนูุฏ ุงุฎุชูุงุฑ ุงููุงุฏุฉ โ ููุก ูุงุฆูุฉ ุงููุณุชูุฏุนุงุช
materialIdOutgoing.addEventListener('change', function() {
    // ุนุฑุถ ุงููุณุชูุฏุนุงุช ุงููุชุงุญุฉ ููุฐู ุงููุงุฏุฉ
});

// ุนูุฏ ุงุฎุชูุงุฑ ุงููุณุชูุฏุน โ ุญูุธ material_detail_id
warehouseFromId.addEventListener('change', function() {
    materialDetailIdHidden.value = detailId;
});
```

---

### 2. Controller (DeliveryNoteController.php)

#### Validation:
```php
'material_id' => $type === 'outgoing' ? 'required|exists:materials,id' : 'nullable',
'warehouse_from_id' => $type === 'outgoing' ? 'required|exists:warehouses,id' : 'nullable',
'material_detail_id' => $type === 'outgoing' ? 'required|exists:material_details,id' : 'nullable',
'delivery_quantity' => $type === 'outgoing' ? 'required|numeric|min:0.01' : 'nullable',
```

#### ูุนุงูุฌุฉ ุงูุจูุงูุงุช:
```php
// ููุฅุฐู ุงูุตุงุฏุฑ: ุงุณุชุฎุฏุงู ุงููุณุชูุฏุน ุงููุตุฏุฑ
if ($type === 'outgoing' && !empty($validated['warehouse_from_id'])) {
    $validated['warehouse_id'] = $validated['warehouse_from_id'];
}

// ุงูุชุฃูุฏ ูู ูุฌูุฏ material_id
if ($type === 'outgoing' && empty($validated['material_id'])) {
    throw new \Exception('ูุฌุจ ุชุญุฏูุฏ ุงููุงุฏุฉ ููุฃุฐู ุงูุตุงุฏุฑุฉ');
}
```

---

## ๐ ูุซุงู ุนููู

### ุงูุณููุงุฑูู:
**ุงููุทููุจ:** ุฅุฎุฑุงุฌ 300 ุทู ุญุฏูุฏ ูู ุงููุณุชูุฏุน ุงูุฑุฆูุณู ููุณู ุงูุฅูุชุงุฌ

### ุงูุจูุงูุงุช ุงููุฏุฎูุฉ:
```
ุงูููุน: ๐ผ ุตุงุฏุฑ
ุงููุงุฏุฉ: ุญุฏูุฏ
ุงููุณุชูุฏุน ุงููุตุฏุฑ: ุงููุณุชูุฏุน ุงูุฑุฆูุณู (ูุชููุฑ: 800 ุทู)
ุงููููุฉ: 300 ุทู
ุงููุฌูุฉ: ูุณู ุงูุฅูุชุงุฌ
ุงูุณุจุจ: ุทูุจูุฉ ุฑูู 123
```

### ุงูุจูุงูุงุช ุงููุญููุธุฉ:
```php
[
    'type' => 'outgoing',
    'material_id' => 1,  // ุญุฏูุฏ
    'material_detail_id' => 5,  // ุญุฏูุฏ ูู ุงููุณุชูุฏุน ุงูุฑุฆูุณู
    'warehouse_id' => 1,  // ุงููุณุชูุฏุน ุงูุฑุฆูุณู (ูู warehouse_from_id)
    'warehouse_from_id' => 1,  // ุงููุณุชูุฏุน ุงููุตุฏุฑ
    'destination_id' => 2,  // ูุณู ุงูุฅูุชุงุฌ
    'delivery_quantity' => 300,
    'notes' => 'ุทูุจูุฉ ุฑูู 123'
]
```

### ุงููุชูุฌุฉ:
```
โ ุฃุฐู ุตุงุฏุฑ ุฑูู: DN-2025-001
โ ุงููุงุฏุฉ: ุญุฏูุฏ
โ ูู: ุงููุณุชูุฏุน ุงูุฑุฆูุณู
โ ุฅูู: ูุณู ุงูุฅูุชุงุฌ
โ ุงููููุฉ: 300 ุทู
โ ุงููููุฉ ุงููุชุจููุฉ ูู ุงููุณุชูุฏุน: 500 ุทู (800 - 300)
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุนุฑุถ ุงููุนูููุงุช:
```
1. ุงุฎุชูุงุฑ ุงููุงุฏุฉ:
   โ ุฅุฌูุงูู ูุชููุฑ: 1500 ุทู ูู 3 ูุณุชูุฏุนุงุช

2. ุงุฎุชูุงุฑ ุงููุณุชูุฏุน:
   โ ูุชููุฑ ูู ูุฐุง ุงููุณุชูุฏุน: 800 ุทู

3. ุฅุฏุฎุงู ุงููููุฉ:
   โ ุณูุชู ุฎุตู 300 ุทู ูู ุงููุณุชูุฏุน

4. ุชุญุฐูุฑุงุช:
   โ ุงููููุฉ ุงููุทููุจุฉ (1000) ุฃูุจุฑ ูู ุงููุชููุฑ (800 ุทู)
```

---

## โ ุงูููุงุฆุฏ

1. **ุฃูุถุญ ูููุณุชุฎุฏู:**
   - ูุฎุชุงุฑ ุงููุงุฏุฉ ุฃููุงู (ุฃุณูู ูู ุงูุจุญุซ)
   - ุซู ูุฎุชุงุฑ ูู ุฃู ูุณุชูุฏุน (ูุน ุนุฑุถ ุงููููุงุช ุงููุชููุฑุฉ)

2. **ุฃูุซุฑ ูุฑููุฉ:**
   - ูููู ุฑุคูุฉ ุฌููุน ุงููุณุชูุฏุนุงุช ุงูุชู ุชุญุชูู ุนูู ุงููุงุฏุฉ
   - ูููู ุงูููุงุฑูุฉ ุจูู ุงููููุงุช ุงููุชููุฑุฉ

3. **ุฃูุซุฑ ุฃูุงูุงู:**
   - ุงูุชุญูู ูู ุงููููุฉ ุงููุชููุฑุฉ ูุจู ุงูุงุฎุชูุงุฑ
   - ููุน ุงูุฅุฎุฑุงุฌ ูู ูุณุชูุฏุน ูุง ูุญุชูู ุนูู ูููุฉ ูุงููุฉ

---

## ๐ ุงูุฎูุงุตุฉ

**ุงููุธุงู ุงูุขู:**
- โ ูุฎุชุงุฑ ุงููุณุชุฎุฏู **ุงููุงุฏุฉ** ุฃููุงู
- โ ุซู ูุฎุชุงุฑ **ุงููุณุชูุฏุน ุงููุตุฏุฑ**
- โ ูุนุฑุถ ุงููููุฉ ุงููุชููุฑุฉ ูู ูู ูุณุชูุฏุน
- โ ูุชุญูู ูู ุงููููุฉ ูุจู ุงูุญูุธ
- โ ูุฎุตู ูู ุงููุณุชูุฏุน ุงููุญุฏุฏ ุชููุงุฆูุงู

**ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู ูุฃูุซุฑ ูุถูุญุงู! ๐ฏ**
