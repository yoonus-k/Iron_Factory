# โ ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุนุฉ - ุงููุณุฎุฉ 2.0

## ๐ฏ ุฃูุฏุงู ุงูุงุฎุชุจุงุฑ

โ ุงูุชุฃูุฏ ูู ูุชุญ Modal ุจุฏูู ุงูุชูุงู ูู create  
โ ุงูุชุฃูุฏ ูู ุชุณุฌูู ุงููููุฉ ูู MaterialDetail  
โ ุงูุชุฃูุฏ ูู ุชุณุฌูู ุงูุญุฑูุฉ ูู warehouse_transactions  
โ ุงูุชุฃูุฏ ูู ุชุญุฏูุซ ุงููููุงุช ูู Material  

---

## ๐งช ุงุฎุชุจุงุฑุงุช ุนูููุฉ

### ุงุฎุชุจุงุฑ 1: ุฅูุดุงุก ูุงุฏุฉ ุฌุฏูุฏุฉ
**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุญูุธ ุงูุจูุงูุงุช ุงูุฃูููุฉ ุจุดูู ุตุญูุญ

**ุงูุฎุทูุงุช:**
- [ ] ุงุฐูุจ ุฅูู "ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ"
- [ ] ุฃุฏุฎู ุงูุจูุงูุงุช:
  - barcode: (ูุชู ุงูุชูููุฏ ุชููุงุฆู)
  - material_type: "ุญุฏูุฏ ุฏุฑููุฉ"
  - original_weight: 100.00
  - unit_id: ุงุฎุชุฑ ูุญุฏุฉ (ูุซู ููููุฌุฑุงู)
  - warehouse_id: ุงุฎุชุฑ ูุณุชูุฏุน (โญ **ุญูู ุฌุฏูุฏ**)
  - min_quantity: 10 (โญ **ุญูู ุฌุฏูุฏ**)
  - max_quantity: 500 (โญ **ุญูู ุฌุฏูุฏ**)
  - status: available
- [ ] ุงุถุบุท "ุญูุธ ุงููุงุฏุฉ"
- [ ] ุชุญูู ูู ุงููุชุงุฆุฌ:
  - [ ] ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ
  - [ ] ุงูุงูุชูุงู ููุงุฆูุฉ ุงูููุงุฏ
  - [ ] ุงููุงุฏุฉ ููุฌูุฏุฉ ูู ุงููุงุฆูุฉ

**ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
-- ุงุฎุชุจุฑ ุงูุฃูุงูุฑ ุงูุชุงููุฉ ูู database tool:
SELECT id, barcode, original_weight, warehouse_id FROM materials 
WHERE material_type = 'ุญุฏูุฏ ุฏุฑููุฉ' 
ORDER BY created_at DESC LIMIT 1;

SELECT * FROM material_details 
WHERE material_id = [ID ูู ุงูุฃูุฑ ุฃุนูุงู];
```

---

### ุงุฎุชุจุงุฑ 2: ูุชุญ Modal ุฏูู ุงูุชูุงู โจ **ุงูุงุฎุชุจุงุฑ ุงูุฃูู**
**ุงููุฏู:** ุงูุชุฃูุฏ ูู ูุชุญ Modal ุจุฏูู ุงูุงูุชูุงู ูุตูุญุฉ create

**ุงูุฎุทูุงุช:**
- [ ] ุงูุชุญ ุตูุญุฉ ุงููุงุฏุฉ ุงูุชู ุฃูุดุฃุชูุง ููุชู (Show page)
- [ ] ุงุจุญุซ ุนู ูุณู "ูุนูููุงุช ุงููุณุชูุฏุน" ูู ุฃุณูู ุงูุตูุญุฉ
- [ ] ุชุญูู ูู ุนุฑุถ:
  - [ ] ุงุณู ุงููุณุชูุฏุน: `{{ $material->warehouse->name }}`
  - [ ] ุงููููุฉ ุงููุชุจููุฉ: `{{ $material->remaining_weight }}`
- [ ] ุงุถุบุท ุนูู ุฒุฑ "ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ"
- [ ] **ุงูุชุญูู ุงูุญุงุณูุฉ:**
  - [ ] ูุฌุจ ุฃู **ูููุชุญ Modal ูู ููุณ ุงูุตูุญุฉ** (ูุง ุชูุชูู!)
  - [ ] **ููุณ** ุงูุงูุชูุงู ุฅูู ุตูุญุฉ Create
  - [ ] ูุธูุฑ ุนููุงู Modal: "ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ"

**ููุงุญุธุฉ ุงูุชุตููู:**
```
โ ูุฌุจ ุฃู ุชุฑู Background ูุธูู ุฎูู Modal
โ ูุฌุจ ุฃู ุชุชููู ูู ุงูุถุบุท X ูุฅุบูุงู Modal
โ ูุฌุจ ุฃู ุชุชููู ูู ุงูุถุบุท Cancel ููุนูุฏุฉ
```

---

### ุงุฎุชุจุงุฑ 3: ุฅุถุงูุฉ ูููุฉ ูู Modal
**ุงููุฏู:** ุงูุชุฃูุฏ ูู ูุนุงููุฉ ุฒุฑ "ุฅุถุงูุฉ ูููุฉ"

**ุงูุฎุทูุงุช:**
- [ ] ุชุฃูุฏ ูู ุฃู Modal ููุชูุญ ูู ุงูุงุฎุชุจุงุฑ ุงูุณุงุจู
- [ ] ุฃุฏุฎู ุงูุจูุงูุงุช:
  - [ ] warehouse_id: ุงุฎุชุฑ **ูุณุชูุฏุน ูุฎุชูู** (ุฅู ุฃููู)
  - [ ] quantity: 50.00
  - [ ] notes: "ุฅุถุงูุฉ ูู ูุดุชุฑูุงุช ุงูููู"
- [ ] ุงุถุบุท "ุฅุถุงูุฉ" ุฃู "Submit"
- [ ] ุชุญูู ูู ุงููุชุงุฆุฌ:
  - [ ] ูุบูู Modal ุชููุงุฆูุงู
  - [ ] ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ ุฎุถุฑุงุก (Success Alert)
  - [ ] ุงูุจูุงุก ูู ููุณ ุตูุญุฉ ุงูุชูุงุตูู (Show)
  - [ ] ุงููููุฉ ุงูุฌุฏูุฏุฉ ุชุธูุฑ (ุฅู ูุงูุช ูุนุฑูุถุฉ)

---

### ุงุฎุชุจุงุฑ 4: ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุชุณุฌูู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

**ุงูุฎุทูุงุช:**
ุงุชุจุน ุงูุฃูุงูุฑ ุงูุชุงููุฉ (ูู Database Client ุฃู Terminal):

**ุฃููุงู: ุงูุชุญูู ูู Materials**
```sql
SELECT id, original_weight, remaining_weight, warehouse_id 
FROM materials 
WHERE barcode = 'MAT-...' LIMIT 1;

-- ูุฌุจ ุฃู ุชุฑู:
-- original_weight: 150.00 (100 + 50)
-- remaining_weight: 150.00
```

**ุซุงููุงู: ุงูุชุญูู ูู MaterialDetails**
```sql
SELECT id, material_id, warehouse_id, quantity, min_quantity, max_quantity 
FROM material_details 
WHERE material_id = [ID ูู ููู];

-- ูุฌุจ ุฃู ุชุฑู ุณุฌู ูุงุญุฏ ุฃู ุฃูุซุฑ:
-- ูุงุญุฏ ูููุณุชูุฏุน ุงูุฃูู ุจู quantity = 100
-- ูุงุญุฏ ูููุณุชูุฏุน ุงูุซุงูู ุจู quantity = 50
```

**ุซุงูุซุงู: ุงูุชุญูู ูู WarehouseTransactions**
```sql
SELECT transaction_number, transaction_type, quantity, created_by, created_at 
FROM warehouse_transactions 
WHERE material_id = [ID ูู ููู]
ORDER BY created_at DESC;

-- ูุฌุจ ุฃู ุชุฑู:
-- ุญุฑูุฉ ุงุณุชูุจุงู ุฃููู ุจู quantity = 100.00 (ุนูุฏ ุงูุฅูุดุงุก)
-- ุญุฑูุฉ ุงุณุชูุจุงู ุซุงููุฉ ุจู quantity = 50.00 (ุนูุฏ ุงูุฅุถุงูุฉ)
```

---

## ๐ฎ ุงุฎุชุจุงุฑุงุช ุงูุฃุฎุทุงุก (Error Handling)

### โ ุงุฎุชุจุงุฑ 5: ุนุฏู ุชุญุฏูุฏ ุงููุณุชูุฏุน
**ุงููุฏู:** ุงูุชุฃูุฏ ูู Validation

**ุงูุฎุทูุงุช:**
- [ ] ูุชุญ Modal "ุฅุถุงูุฉ ูููุฉ"
- [ ] **ูุง ุชุฎุชุฑ ูุณุชูุฏุน** (ุงุชุฑู ุงูุฎุงูุฉ ูุงุฑุบุฉ)
- [ ] ุฃุฏุฎู ูููุฉ: 50
- [ ] ุงุถุบุท "ุฅุถุงูุฉ"
- [ ] **ูุชููุน:**
  - [ ] ุธููุฑ ุฑุณุงูุฉ ุฎุทุฃ: "ุงููุณุชูุฏุน ูุทููุจ"
  - [ ] ุจูุงุก Modal ููุชูุญ
  - [ ] ุนุฏู ุญูุธ ุงูุจูุงูุงุช

---

### โ ุงุฎุชุจุงุฑ 6: ูููุฉ ุบูุฑ ุตุญูุญุฉ
**ุงููุฏู:** ุงูุชุฃูุฏ ูู Validation ูููููุฉ

**ุงูุฎุทูุงุช:**
- [ ] ูุชุญ Modal "ุฅุถุงูุฉ ูููุฉ"
- [ ] ุงุฎุชุฑ ูุณุชูุฏุน
- [ ] ุฃุฏุฎู ูููุฉ: **0** ุฃู **-5** (ูููุฉ ุณุงูุจุฉ ุฃู ุตูุฑ)
- [ ] ุงุถุบุท "ุฅุถุงูุฉ"
- [ ] **ูุชููุน:**
  - [ ] ุธููุฑ ุฑุณุงูุฉ ุฎุทุฃ
  - [ ] ุนุฏู ุญูุธ ุงูุจูุงูุงุช

---

### โ ุงุฎุชุจุงุฑ 7: ููุงุญุธุงุช ุทูููุฉ ุฌุฏุงู
**ุงููุฏู:** ุงูุชุฃูุฏ ูู Validation ููููุงุญุธุงุช

**ุงูุฎุทูุงุช:**
- [ ] ูุชุญ Modal "ุฅุถุงูุฉ ูููุฉ"
- [ ] ุฃุฏุฎู ููุงุญุธุงุช: **ุฃูุซุฑ ูู 500 ุญุฑู**
- [ ] ุงุถุบุท "ุฅุถุงูุฉ"
- [ ] **ูุชููุน:**
  - [ ] ุธููุฑ ุฑุณุงูุฉ ุฎุทุฃ
  - [ ] ุนุฏู ุญูุธ ุงูุจูุงูุงุช

---

## ๐ ููุงููุณ ุงููุฌุงุญ

### โ ุงููุธุงู ูุนุชุจุฑ ูุงุฌุญุงู ุฅุฐุง:

| ุฑูู | ุงููุนูุงุฑ | ุงูุญุงูุฉ |
|-----|--------|--------|
| 1 | Modal ููุชุญ ุจุฏูู ุงูุชูุงู ูู create | โ |
| 2 | ุงูุจูุงูุงุช ุชุญูุธ ูู Material ุจุดูู ุตุญูุญ | โ |
| 3 | ุงูุจูุงูุงุช ุชุญูุธ ูู MaterialDetail ุจุดูู ุตุญูุญ | โ |
| 4 | ุงูุญุฑูุงุช ุชุณุฌู ูู WarehouseTransactions | โ |
| 5 | ุงููููุงุช ุชุชุญุฏุซ ุจุดูู ุตุญูุญ | โ |
| 6 | ุฑุณุงุฆู ุงูุฎุทุฃ ุชุธูุฑ ุจุดูู ุตุญูุญ | โ |
| 7 | validation ูุนูู ุนูู Quantity | โ |
| 8 | validation ูุนูู ุนูู warehouse_id | โ |

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: Modal ูุง ูููุชุญ

**ุงูุณุจุจ ุงููุญุชูู:** jQuery ุฃู Bootstrap ูู ุชุญูู ุจุดูู ุตุญูุญ

**ุงูุญู:**
1. ุงูุชุญ Developer Tools (F12)
2. ุงูุธุฑ ุฅูู Console ููุฃุฎุทุงุก
3. ุชุญูู ูู ุฃู master.blade.php ูุญุชูู ุนูู:
   ```html
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   ```

---

### ุงููุดููุฉ: "ุงููุฒู ุงููุชุจูู" ูู ูุชุญุฏุซ

**ุงูุณุจุจ ุงููุญุชูู:** addQuantity() method ูู ูููุฐ ุจุดูู ุตุญูุญ

**ุงูุญู:**
1. ุงูุชุญ `storage/logs/laravel.log`
2. ุงุจุญุซ ุนู ุงูุฃุฎุทุงุก (Error)
3. ูู ุญุตู `undefined property`, ุชุญูู ูู:
   - Material model ูุฏูู `$fillable` ูุชุถูู `remaining_weight`
   - Warehouse model ููุฌูุฏ ููุฑุชุจุท ุตุญูุญ

---

### ุงููุดููุฉ: warehouse_id ูุทููุจ ูู create form

**ุงูุณุจุจ:** ุชู ุชุบููุฑู ูู nullable ุฅูู required

**ุงูุญู:**
- ุงุฎุชุฑ warehouse ูู dropdown ุนูุฏ ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ
- ุฅุฐุง ูู ุชูู ุชุฑูุฏ ูุงุญุฏุ ุฃูุดุฆ warehouse ุฌุฏูุฏ ูู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุนุงุช

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

1. **ุงูุญููู ุงูุฌุฏูุฏุฉ ูู create form:**
   - warehouse_id (ูุทููุจ)
   - min_quantity
   - max_quantity

2. **Bootstrap 5 ูุญุชุงุฌ:**
   - `data-bs-toggle` ู `data-bs-target` (ููุณ `data-toggle` ู `data-target`)

3. **MaterialDetail table:**
   - ูุญูุธ ุงููููุฉ ููู ูุงุฏุฉ ูู ูู ูุณุชูุฏุน ูููุตู

4. **WarehouseTransaction:**
   - ุชุณุฌูู ุชููุงุฆู ููู ุญุฑูุฉ ูุน ุงููุณุชุฎุฏู ูุงูุชุงุฑูุฎ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 15 ููููุจุฑ 2024  
**ุงูุฅุตุฏุงุฑ:** 2.0  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุฎุชุจุงุฑ ุงูุดุงูู โ
