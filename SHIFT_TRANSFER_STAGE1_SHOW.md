# ุดุฑุญ: ููู ุงููุฑุฏูุฉ ูู ุตูุญุฉ ุชูุงุตูู ุงููุฑุญูุฉ

## ูุง ุชู ุฅุถุงูุชู:

ุชู ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ ูู ุตูุญุฉ ุนุฑุถ ุชูุงุตูู ุงููุฑุญูุฉ (Stage 1 Show Page) ูุชูุญ:

### 1. ุนุฑุถ ุงููุฑุฏูุฉ ุงูุญุงููุฉ
- ููุฏ ุงููุฑุฏูุฉ
- ุงุณู ุงูุนุงูู ุงูุญุงูู
- ุงููุณุคูู
- ููุน ุงููุฑุฏูุฉ (ุตุจุงุญูุฉ/ูุณุงุฆูุฉ)
- ููุช ุงูุจุฏุงูุฉ ูุงูุชุงุฑูุฎ

### 2. ุฒุฑ ููู ุงููุฑุญูุฉ ูุจุงุดุฑุฉ
- ูุงุฆูุฉ ููุณุฏูุฉ ุจุฌููุน ุงููุฑุฏูุงุช ุงููุชุงุญุฉ
- ุฒุฑ "ููู" ูููู ุจููู ุงููุฑุญูุฉ ููุฑุงู
- ุชุญุฏูุซ ุงูุตูุญุฉ ุชููุงุฆูุงู ุจุนุฏ ุงูููู ุงููุงุฌุญ

### 3. ุนุฑุถ ุณุฌู ุงููุฑุฏูุงุช ุงูุณุงุจูุฉ
- ูุงุฆูุฉ ุจุฌููุน ุงููุฑุฏูุงุช ุงูุชู ุนููุช ุนูู ูุฐู ุงููุฑุญูุฉ ูู ูุจู
- ูุนูููุงุช ุงูููู (ูู/ุฅูู)
- ููุช ุงูููู ูุงูุญุงูุฉ (ููุงูู ุนููู/ููุฏ ุงูุงูุชุธุงุฑ)
- ุงูููุงุญุธุงุช ุงููุณุฌูุฉ

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู:

### ุงูุฎุทูุงุช:
1. ุงุฏุฎู ุนูู ุตูุญุฉ ุชูุงุตูู ุงููุฑุญูุฉ (show page)
2. ุงูุธุฑ ุฅูู ูุณู "ุงููุฑุฏูุฉ ุงูุญุงููุฉ"
3. ุงุฎุชุฑ ุงููุฑุฏูุฉ ุงููุณุชูุฏูุฉ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ "ุงููุฑุฏูุงุช ุงููุชุงุญุฉ"
4. ุงุถุบุท ุนูู ุฒุฑ "ููู"
5. ุงุถุบุท "ุชุฃููุฏ" ูู ูุงูุฐุฉ ุงูุชุฃููุฏ
6. ุณูุชู ููู ุงููุฑุญูุฉ ููุฑุงู ูุชุญุฏูุซ ุงูุตูุญุฉ

---

## ุงูุจูุงูุงุช ุงููุญุฏุซุฉ:

ุนูุฏ ููู ุงููุฑุญูุฉ ูุชู:

### 1. ุชุญุฏูุซ ุฌุฏูู `shift_assignments`:
- **ุงููุฑุฏูุฉ ุงูุฌุฏูุฏุฉ**:
  - `stage_number` = 1
  - `stage_record_id` = ูุนุฑู ุงูุณุชุงูุฏ
  - `stage_record_barcode` = ุจุงุฑููุฏ ุงูุณุชุงูุฏ

- **ุงููุฑุฏูุฉ ุงููุฏููุฉ**:
  - `stage_number` = NULL
  - `stage_record_id` = NULL
  - `stage_record_barcode` = NULL

### 2. ุฅูุดุงุก ุณุฌู ูู `shift_handovers`:
```json
{
  "from_user_id": 1,                    // ุงูุนุงูู ุงูุฃูู
  "to_user_id": 2,                      // ุงูุนุงูู ุงูุซุงูู
  "from_shift_id": 10,                  // ุงููุฑุฏูุฉ ุงูุฃููู
  "to_shift_id": 11,                    // ุงููุฑุฏูุฉ ุงูุซุงููุฉ
  "stage_number": 1,                    // ุงููุฑุญูุฉ
  "handover_items": {
    "stage_record_id": 123,
    "stage_record_barcode": "STG-001-123",
    "transfer_type": "stage_transfer"
  },
  "notes": "ููู ุงููุฑุญูุฉ #1 ูู ุงูุณุชุงูุฏ ุฑูู: 123",
  "handover_time": "2025-01-15 10:30:00",
  "supervisor_approved": false
}
```

### 3. ุชุญุฏูุซ ุณุฌู `worker_stage_history`:
- ุฅููุงุก ุฌููุน ุงูุณุฌูุงุช ุงููุดุทุฉ ููุนูุงู ุนูู ูุฐู ุงููุฑุญูุฉ
- ูุถุน `is_active = false`
- ุชุณุฌูู `status_after = 'transferred'`

---

## ุงููุงุฌูุฉ:

### ูุณู ุงููุฑุฏูุฉ ุงูุญุงููุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ผ ุงููุฑุฏูุฉ ุงูุญุงููุฉ              โ ูุดุทุฉ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ููุฏ ุงููุฑุฏูุฉ: SHIFT-001          โ
โ ุงูุนุงูู ุงูุญุงูู: ุฃุญูุฏ ูุญูุฏ        โ
โ ุงููุณุคูู: ุณุงูู ุนูู               โ
โ ููุน ุงููุฑุฏูุฉ: ุงููุชุฑุฉ ุงูุฃููู      โ
โ ููุช ุงูุจุฏุงูุฉ: 06:00              โ
โ ุชุงุฑูุฎ ุงููุฑุฏูุฉ: 2025-01-15       โ
โ                                 โ
โ โก๏ธ ููู ุงููุฑุญูุฉ ููุฑุฏูุฉ ุฃุฎุฑู    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ โ -- ุงุฎุชุฑ ุงููุฑุฏูุฉ           โ  โ
โ โ SHIFT-002 - ุนูู ูุญููุฏ   โผ โ  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ            [ููู] โบ |             โ
โ                                 โ
โโน๏ธ ุงุฎุชุฑ ูุฑุฏูุฉ ูู ุงููุงุฆูุฉ ุฃุนูุงู  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ูุณู ุงููุฑุฏูุงุช ุงูุณุงุจูุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โฑ๏ธ ุณุฌู ุงููุฑุฏูุงุช ุงูุณุงุจูุฉ (3)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                         โ
โ ุฃุญูุฏ ูุญูุฏ    โก๏ธ    ุนูู ูุญููุฏ           โ
โ ููุช ุงูููู: 2025-01-15 08:30            โ
โ ุงูุญุงูุฉ: โ ููุงูู ุนููู                  โ
โ ููุงุญุธุงุช: ููู ูุนุฏู ุชููุฑ ุฃุญูุฏ             โ
โ                                         โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                         โ
โ ุนูู ูุญููุฏ    โก๏ธ    ูุญููุฏ ุณุงูู          โ
โ ููุช ุงูููู: 2025-01-15 06:15            โ
โ ุงูุญุงูุฉ: โณ ููุฏ ุงูุงูุชุธุงุฑ                โ
โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุงูุฃุฐููุงุช ุงููุทููุจุฉ:

```php
'SHIFT_HANDOVERS_CREATE'  // ูููู ุงููุฑุญูุฉ
```

---

## ููุงุญุธุงุช ูููุฉ:

โ๏ธ **ุชูุจููุงุช:**
- ุงูููู ููุฑู ุจุฏูู ุชุฃููุฏ ุฅุถุงูู ูู ุงูููุงููุฉ
- ูุง ูุธูุฑ ุงูุฒุฑ ุฅุฐุง ูู ุชูู ููุงู ูุฑุฏูุฉ ุญุงููุฉ
- ูุง ูุธูุฑ ุงูุฒุฑ ุฅุฐุง ูู ุชูู ููุงู ูุฑุฏูุงุช ูุชุงุญุฉ ููููู ุฅูููุง
- ุงูููู ูุคุซุฑ ุนูู ุฌููุน ุงูุนูุงู ุงููุดุทูู ุนูู ุงููุฑุญูุฉ

๐ก **ูุตุงุฆุญ:**
- ุงุณุชุฎุฏู ุงูููุงุญุธุงุช ุงููุณุฌูุฉ ูุชุชุจุน ุณุจุจ ุงูููู
- ุฑุงุฌุน ุณุฌู ุงููุฑุฏูุงุช ุงูุณุงุจูุฉ ูููู ุชุงุฑูุฎ ุงููุฑุญูุฉ
- ุชุฃูุฏ ูู ุงุฎุชูุงุฑ ุงููุฑุฏูุฉ ุงูุตุญูุญุฉ ูุจู ุงูููู

---

## ุงูุทูุจุงุช API:

### ููู ุงููุฑุญูุฉ (AJAX):
```javascript
POST /shift-handovers/transfer-stage-store

Content-Type: application/json
X-CSRF-TOKEN: {{csrf_token}}

{
  "from_shift_id": 10,
  "to_shift_id": 11,
  "stage_number": 1,
  "stage_record_id": 123,
  "stage_record_barcode": "STG-001-123"
}

Response:
{
  "success": true,
  "message": "ุชู ููู ุงููุฑุญูุฉ ุจูุฌุงุญ...",
  "data": {
    "handover_id": 456
  }
}
```

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ุงููุดููุฉ: ูุง ูุธูุฑ ูุณู ุงููุฑุฏูุฉ ุงูุญุงููุฉ
**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุงููุฑุญูุฉ ูุฑุชุจุทุฉ ุจูุฑุฏูุฉ ูุดุทุฉ
- ุชุญูู ูู ุฌุฏูู `shift_assignments`

### ุงููุดููุฉ: ูุงุฆูุฉ ุงููุฑุฏูุงุช ูุงุฑุบุฉ
**ุงูุญู:**
- ุชุฃูุฏ ูู ูุฌูุฏ ูุฑุฏูุงุช ุฃุฎุฑู ูุดุทุฉ ูู ููุณ ุงููุฑุญูุฉ
- ุชุญูู ูู ุฃู ุงููุฑุฏูุงุช ููุง ุญุงูุฉ 'active'

### ุงููุดููุฉ: ุฑุณุงูุฉ "ุฎุทุฃ ูู ุงูุงุชุตุงู"
**ุงูุญู:**
- ุชุฃูุฏ ูู ูุฌูุฏ CSRF token ูู ุงูุตูุญุฉ
- ุญุงูู ุชุญุฏูุซ ุงูุตูุญุฉ
- ุชุญูู ูู ุณุฌูุงุช ุงูุฎุงุฏู
