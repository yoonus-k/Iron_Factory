# ุดุฑุญ ุงูุชุญุณููุงุช ุนูู ุตูุญุฉ ุนุฑุถ ุงููุฑุญูุฉ ุงูุฃููู (Stage1 Show)

## ๐ฏ ุงููุฏู
ุชุญููู ูุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ ูููุฑุฏูุงุช ูุงูุนูุงู ูู ุตูุญุฉ ุชูุงุตูู ุงููุฑุญูุฉ ุงูุฃููู ุจุดูู ุตุญูุญ.

## ๐ ุงูุชุบููุฑุงุช ุงููููุฐุฉ

### 1๏ธโฃ ุชุญุณูู ุงูู Controller (Stage1Controller.php)

#### ูุจู:
```php
// ูุง ุชููุฑุฑ ุจูุงูุงุช ุงููุฑุฏูุงุช ูุงูุนูุงู
return view('manufacturing::stages.stage1.show', compact('stand', 'operationLogs', 'trackingLogs', 'usageHistory'));
```

#### ุจุนุฏ:
```php
// ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ ุงูููุงุฐุฌ
use App\Models\ShiftAssignment;
use App\Models\Worker;

// ูู ุฏุงูุฉ show():
// ุฌูุจ ุงููุฑุฏูุฉ ุงูุญุงููุฉ
$currentShiftAssignment = \App\Models\ShiftAssignment::where('stage_number', 1)
    ->where('stage_record_id', $stand->id)
    ->where('stage_record_barcode', $stand->barcode)
    ->with(['supervisor'])
    ->latest('created_at')
    ->first();

// ุฅุฐุง ูู ูุฌุฏ ุงุฑุชุจุงุท ูุจุงุดุฑุ ุฌูุจ ุขุฎุฑ ูุฑุฏูุฉ ูุดุทุฉ
if (!$currentShiftAssignment) {
    $currentShiftAssignment = \App\Models\ShiftAssignment::where('status', 'active')
        ->where('stage_number', 1)
        ->with(['supervisor'])
        ->latest('created_at')
        ->first();
}

// ุฌูุจ ุงููุฑุฏูุฉ ุงูุณุงุจูุฉ
$previousShift = \App\Models\ShiftAssignment::where('stage_number', 1)
    ->with(['supervisor'])
    ->orderBy('created_at', 'desc')
    ->skip(1)
    ->first();

// ุฌูุจ ุงูุนูุงู ุงูุญุงูููู
$currentShiftWorkers = $currentShiftAssignment ? \App\Models\Worker::whereIn('id', $currentShiftAssignment->worker_ids ?? [])->get() : collect();

// ุฌูุจ ุงูุนูุงู ุงูุณุงุจููู
$previousShiftWorkers = $previousShift ? \App\Models\Worker::whereIn('id', $previousShift->worker_ids ?? [])->get() : collect();

// ุชูุฑูุฑ ุงูุจูุงูุงุช ุฅูู ุงูู View
return view('manufacturing::stages.stage1.show', compact(
    'stand', 'operationLogs', 'trackingLogs', 'usageHistory',
    'currentShiftAssignment', 'previousShift', 
    'currentShiftWorkers', 'previousShiftWorkers'
));
```

### 2๏ธโฃ ุชุญุณูู ุงูู Blade Template (show.blade.php)

#### ุชู ุฅุฒุงูุฉ:
- ุงูุงุณุชุนูุงูุงุช ุงูููุฑุฑุฉ ูู @php ุฏุงุฎู ุงูู template
- ุชุญููู ุงูุจูุงูุงุช ูุฑุชูู (ูุฑุฉ ูู ุงูู Controller ููุฑุฉ ูู ุงูู Template)

#### ุชู ุงูุงุญุชูุงุธ:
- ุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
- ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ูู ุงูู Controller
- ุนุฑุถ ุงููุณุคูู ุจุงุณุชุฎุฏุงู ุงูุนูุงูุฉ (supervisor?)
- ุนุฑุถ ูุงุฆูุฉ ุงูุนูุงู ูุน ุฃุณูุงุฆูู ูุฃููุฏูู

## ๐ ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ ุงูุขู

### ุงููุฑุฏูุฉ ุงูุญุงููุฉ ๐ต
- โ ุฑูู ุงููุฑุฏูุฉ (shift_code)
- โ ุงููุณุคูู (supervisor_id โ supervisor()->name)
- โ ุงููุชุฑุฉ (shift_type: morning/evening)
- โ ุนุฏุฏ ุงูุนูุงู
- โ ูุงุฆูุฉ ุงูุนูุงู ุงูุญุงูููู

### ุงููุฑุฏูุฉ ุงูุณุงุจูุฉ ๐
- โ ุฑูู ุงููุฑุฏูุฉ (shift_code)
- โ ุงููุณุคูู (supervisor_id โ supervisor()->name)
- โ ุงููุชุฑุฉ (shift_type: morning/evening)
- โ ุนุฏุฏ ุงูุนูุงู
- โ ูุงุฆูุฉ ุงูุนูุงู ุงูุณุงุจููู

### ุงูุนูุงู ุงููุดุทูู ุงูุขู ๐ข
- โ ูุงุฆูุฉ ุงูุนูุงู ุงููุณุฌููู ุงูุขู ุนูู ุงููุฑุญูุฉ
- โ ููุช ุงูุจุฏุก
- โ ูุฏุฉ ุงูุนูู

## ๐๏ธ ุงููุฒุงูุง ุงูุฑุฆูุณูุฉ

1. **ุชุญููู ุตุญูุญ**: ุงูุจูุงูุงุช ุชูุญูู ูู ุงูู Controller ูุฑุฉ ูุงุญุฏุฉ ููุท
2. **ุฃุฏุงุก ุฃูุถู**: ุชูููู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุนุฑุถ ูุงุถุญ**: ุงููุฑุฏูุงุช ูุงูุนูุงู ูุธูุฑูู ุจุดูู ููุธู ููููู
4. **ุจูุงูุงุช ุญุฏูุซุฉ**: ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช ูู ุงูููุงุฐุฌ (supervisor)
5. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ูุจู ุงูุนุฑุถ

## ๐ฆ ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ

- `ShiftAssignment`: ุจูุงูุงุช ุงููุฑุฏูุงุช
- `Worker`: ุจูุงูุงุช ุงูุนูุงู
- `User`: ุจูุงูุงุช ุงููุณุคูู (ุนุจุฑ ุงูุนูุงูุฉ supervisor)
- `WorkerStageHistory`: ุชุชุจุน ุงูุนูุงู ุงููุดุทูู

## โจ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุนูุฏ ูุชุญ ุตูุญุฉ ุชูุงุตูู ุฃู ูุฑุญูุฉ (stage1 show page)ุ ุณุชุฌุฏ:
- ุงููุฑุฏูุฉ ุงูุญุงููุฉ ูุน ุงููุณุคูู ูุงูุนูุงู
- ุงููุฑุฏูุฉ ุงูุณุงุจูุฉ ูุน ุงููุณุคูู ูุงูุนูุงู
- ูุงุฆูุฉ ุงูุนูุงู ุงููุดุทูู ุงูุขู ุนูู ุงููุฑุญูุฉ
- ุฌููุน ุงูุจูุงูุงุช ุชูุญูู ุจุดูู ุตุญูุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
